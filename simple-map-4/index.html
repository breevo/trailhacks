

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">

  <link rel="stylesheet" href="https://js.arcgis.com/4.0beta3/esri/css/main.css"></p>
  <script src="https://js.arcgis.com/4.0beta3/"></script>
	<script>
	   var map;
	  
	  require(["esri/Map",
      "esri/layers/OpenStreetMapLayer",
      "esri/views/MapView",
      "esri/views/SceneView",
      "esri/layers/ArcGISDynamicLayer",
      "esri/widgets/Home",
      "esri/widgets/Home/HomeViewModel",
		  "dojo/parser", "dojo/dom-style",
	      "dojo/on", 
	      "dojo/dom",
          "esri/layers/FeatureLayer",
          "esri/geometry/Extent",        
          "dojo/dom-construct",
	        "esri/symbols/SimpleLineSymbol",
	        "esri/symbols/SimpleFillSymbol",
	        "esri/symbols/TextSymbol",
	        "esri/renderers/SimpleRenderer",
	        "esri/Color",
	   
		  "dijit/layout/BorderContainer", "dijit/layout/ContentPane",
	      "dojo/domReady!"], function(Map, OpenStreeMapLayer, MapView, SceneView, ArcGISDynamicLayer, Home, HomeVM, 
          parser, domStyle, on, dom, FeatureLayer, Extent, domConstruct, 
          SimpleLineSymbol, SimpleFillSymbol, TextSymbol, SimpleRenderer, LabelClass, Color) {


		// var infoWindow = new InfoWindowLite(null, domConstruct.create("div", null, null, map.root));
  //       infoWindow.startup();
  //       map.setInfoWindow(infoWindow);

  //       var template = new InfoTemplate();
  //       template.setTitle("<b>${TRAILNAME}</b>");
  //       template.setContent("<p>${LOOPNAME}</p>MTB? ${MTN_BIKING}");

  //       // create a renderer for the states layer to override default symbology
        // var trailColor = new Color("#00FF00");
        // var trailLine = new SimpleLineSymbol({style: "solid", color: "#00FF00", width: 2.5});
        // var trailSymbol = new SimpleFillSymbol({"style": "none", trailLine, null);
        // var trailRenderer = new SimpleRenderer(trailSymbol);
        

        var trailRenderer = new SimpleRenderer({
          symbol: new SimpleLineSymbol({color: "#00FF00", width: 4.5}),
          visualVariables: [{
            type: "opacityInfo",
            opacityValues: [ 0.5 ]
          }]
        });

        //add a layer to the map
        var featureLayer = new FeatureLayer({url: "http://tlcgisinter.leoncountyfl.gov/arcgis/rest/services/Public/TLC_Inter_OverlayTrailahassee_D_WM/MapServer/3",
          // mode: FeatureLayer.MODE_ONDEMAND,
          // infoTemplate:template,
       //    outFields: ["PARKNAME" , "TRAILNAME", "LOOPNAME", "MTN_BIKING"],
    		 //  showLabels: true,
    			// opacity: 0.8,
          renderer: trailRenderer,
          // definitionExpression: "MTN_BIKING = 'Yes' OR BIKING = 'Yes'"
        });

        featureLayer.then(function() {
          view.animateTo({
            center: [-84.291221, 30.4343218],
            zoom: 12,
          });
        });

      var trailTypeLayer = new ArcGISDynamicLayer({
        url: "http://tlcgisinter.leoncountyfl.gov/arcgis/rest/services/Public/TLC_Inter_OverlayTrailahassee_D_WM/MapServer",
        visibleLayers: [1, 2, 4],
        showLabels: true,
        opacity: 0.9
      });
		  
        map = new Map({
          basemap: "topo",
          layers: [featureLayer, trailTypeLayer]
        });

        var view = new MapView({
          container: "mapDiv",
          center: [-84.291221, 30.4343218],
          zoom: 11,
          map: map 
        });


          // Wire UI Events
          on(dom.byId("btnStreets"),"click", function() { 
            map.basemap = "osm";
          });
          on(dom.byId("btnSatellite"),"click", function() { 
            map.basemap = "satellite";
          });
          on(dom.byId("btnTopo"),"click", function() { 
            map.basemap = "topo";
          });

          var homeBtn = new Home({
            viewModel: new HomeVM({
              view: view
            })
          }, "homediv");
          homeBtn.startup();

	  });

	</script>

	<style>
	  html, body, #mapDiv {
	    padding: 0;
	    margin: 0;
	    height: 100%;
	  }
	  
	  .panel-heading, .panel-title {
	  	padding: 0;
	  	margin: 0;
	  }

    #homediv {
      position: absolute;
      top: 80px;
      left: 15px;
      z-index: 50;
    }
	  
	  .panel-primary {
		z-index: 100;
		padding: 10px 10px 10px 10px;
		position: absolute;
		bottom: 34px;
		left: 14px;
		border: 1px solid #EAEAEA;
		background: rgba(255, 255, 255, 0.5);
	  }
	</style>



	
    <title></title>
  </head>


  <body class="claro">

<div class="panel panel-primary panel-fixed">
<!--       <div class="panel-heading">
        <h3 class="panel-title">Map</h3>
      </div>
 -->      <div class="panel-body">
        <div class="btn-toolbar">
          <div class="btn-group">
            <button id="btnStreets" class="btn btn-default">Street Map</button>
            <button id="btnSatellite" class="btn btn-default">Satellite</button>
            <button id="btnTopo" class="btn btn-default">Topography</button>
          </div>  
        </div>
      </div>
    </div>

    <div id="mapDiv">
      <div id="homediv"></div>
    </div>
  </body>

  
  
</html>

